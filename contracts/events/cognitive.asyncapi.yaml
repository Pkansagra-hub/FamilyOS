asyncapi: 3.0.0
info:
  title: Memory-Centric Family AI - Cognitive Event Processing
  description: |
    **Cognitive Event Processing Contract**

    This contract defines the event-driven cognitive processing architecture for the Memory-Centric Family AI system, enabling coordination across P01-P20 cognitive pipelines with family context awareness and memory backbone integration.

    **Event-Driven Cognitive Architecture:**
    - **Cognitive Trace Correlation**: End-to-end traceability across all cognitive processing stages
    - **Pipeline Coordination**: Event-driven coordination between P01-P20 cognitive processing pipelines
    - **Memory Events**: Integration with memory formation, consolidation, and retrieval events
    - **Family Context Events**: Family relationship, emotional, and social context event processing
    - **Real-Time Processing**: Low-latency event processing for responsive family AI interactions

    **Memory-Centric Event Design:**
    - All cognitive events maintain memory context and family relationship awareness
    - Events support episodic memory formation and associative memory building
    - Family privacy and consent preservation throughout event processing
    - Device-local event processing with secure family sync capabilities
    - Emotional context propagation for authentic family experience

    **P01-P20 Cognitive Pipeline Events:**
    - **P01-P05**: Sensory processing and attention events with family context
    - **P06-P10**: Working memory and hippocampal formation events
    - **P11-P15**: Cortical processing and semantic integration events
    - **P16-P20**: Action planning and execution coordination events

    **Family Safety and Privacy:**
    - All events respect family privacy levels and age-appropriate filtering
    - Consent-based event sharing between family members and devices
    - Supervision requirements for child-involved cognitive processing
    - Emergency override capabilities for family safety situations
    - Audit trails for all family-affecting cognitive events

    **Event Reliability and Performance:**
    - At-least-once delivery semantics for critical family memory events
    - Idempotent event processing to handle retries safely
    - Priority-based event processing for time-sensitive family interactions
    - Circuit breaker patterns for cognitive pipeline fault tolerance
    - Backpressure handling for high-volume family interaction periods
  version: "1.0.0"
  contact:
    name: MemoryOS Cognitive Architecture Team
    url: https://familyos.local/support/cognitive-events
    email: cognitive-events@familyos.local
  license:
    name: Family OS Private License
    url: https://familyos.local/licenses/family-os

servers:
  production:
    host: events.familyos.local
    protocol: wss
    description: Production Cognitive Event Bus
    security:
      - $ref: '#/components/securitySchemes/FamilyOSAuth'
    tags:
      - name: production
        description: Production environment

  staging:
    host: staging-events.familyos.local
    protocol: wss
    description: Staging Environment
    security:
      - $ref: '#/components/securitySchemes/FamilyOSAuth'
    tags:
      - name: staging
        description: Staging environment

  development:
    host: localhost:8082
    protocol: ws
    description: Local Development
    tags:
      - name: development
        description: Local development environment

defaultContentType: application/json

channels:
  # Cognitive Processing Coordination
  cognitive/trace/{cognitive_trace_id}:
    address: cognitive/trace/{cognitive_trace_id}
    parameters:
      cognitive_trace_id:
        $ref: '#/components/parameters/CognitiveTraceId'
    messages:
      CognitiveTraceEvent:
        $ref: '#/components/messages/CognitiveTraceEvent'
    description: |
      Cognitive trace events for end-to-end tracking across P01-P20 pipelines.
      Each cognitive processing session gets a unique trace ID for correlation.
    tags:
      - name: cognitive-coordination
        description: Cognitive pipeline coordination

  cognitive/pipeline/{pipeline_id}/stage/{stage_id}:
    address: cognitive/pipeline/{pipeline_id}/stage/{stage_id}
    parameters:
      pipeline_id:
        $ref: '#/components/parameters/PipelineId'
      stage_id:
        $ref: '#/components/parameters/StageId'
    messages:
      PipelineStageEvent:
        $ref: '#/components/messages/PipelineStageEvent'
    description: |
      Events for individual cognitive pipeline stages (P01-P20).
      Enables fine-grained tracking and coordination of cognitive processing.

  # Memory Formation Events
  memory/formation/{family_id}:
    address: memory/formation/{family_id}
    parameters:
      family_id:
        $ref: '#/components/parameters/FamilyId'
    messages:
      MemoryFormationEvent:
        $ref: '#/components/messages/MemoryFormationEvent'
    description: |
      Memory formation events from hippocampal processing and episodic storage.
      Family-scoped to maintain privacy and relationship context.

  memory/consolidation/{family_id}:
    address: memory/consolidation/{family_id}
    parameters:
      family_id:
        $ref: '#/components/parameters/FamilyId'
    messages:
      MemoryConsolidationEvent:
        $ref: '#/components/messages/MemoryConsolidationEvent'
    description: |
      Memory consolidation events for transferring memories to long-term storage.
      Includes family importance scoring and relationship preservation.

  memory/retrieval/{family_id}:
    address: memory/retrieval/{family_id}
    parameters:
      family_id:
        $ref: '#/components/parameters/FamilyId'
    messages:
      MemoryRetrievalEvent:
        $ref: '#/components/messages/MemoryRetrievalEvent'
    description: |
      Memory retrieval events for accessing family memories and associations.
      Maintains privacy controls and age-appropriate filtering.

  # Attention and Working Memory Events
  attention/focus/{family_id}/{device_id}:
    address: attention/focus/{family_id}/{device_id}
    parameters:
      family_id:
        $ref: '#/components/parameters/FamilyId'
      device_id:
        $ref: '#/components/parameters/DeviceId'
    messages:
      AttentionFocusEvent:
        $ref: '#/components/messages/AttentionFocusEvent'
    description: |
      Attention focus events for cognitive resource allocation.
      Device-scoped for user-specific attention tracking with family awareness.

  working_memory/update/{family_id}/{cognitive_trace_id}:
    address: working_memory/update/{family_id}/{cognitive_trace_id}
    parameters:
      family_id:
        $ref: '#/components/parameters/FamilyId'
      cognitive_trace_id:
        $ref: '#/components/parameters/CognitiveTraceId'
    messages:
      WorkingMemoryEvent:
        $ref: '#/components/messages/WorkingMemoryEvent'
    description: |
      Working memory events for temporary cognitive state management.
      Trace-scoped for cognitive session correlation with family context.

  # Family Context Events
  family/relationship/{family_id}:
    address: family/relationship/{family_id}
    parameters:
      family_id:
        $ref: '#/components/parameters/FamilyId'
    messages:
      FamilyRelationshipEvent:
        $ref: '#/components/messages/FamilyRelationshipEvent'
    description: |
      Family relationship context events for relationship-aware processing.
      Privacy-controlled sharing of family dynamics and emotional context.

  family/emotional_context/{family_id}:
    address: family/emotional_context/{family_id}
    parameters:
      family_id:
        $ref: '#/components/parameters/FamilyId'
    messages:
      FamilyEmotionalEvent:
        $ref: '#/components/messages/FamilyEmotionalEvent'
    description: |
      Family emotional context events for emotion-aware cognitive processing.
      Includes emotional contagion, regulation needs, and climate assessment.

  family/coordination/{family_id}:
    address: family/coordination/{family_id}
    parameters:
      family_id:
        $ref: '#/components/parameters/FamilyId'
    messages:
      FamilyCoordinationEvent:
        $ref: '#/components/messages/FamilyCoordinationEvent'
    description: |
      Family coordination events for multi-member decision making and consensus.
      Enables coordinated family AI responses and synchronized experiences.

  # Sensory Processing Events (P01-P05)
  sensory/input/{device_id}:
    address: sensory/input/{device_id}
    parameters:
      device_id:
        $ref: '#/components/parameters/DeviceId'
    messages:
      SensoryInputEvent:
        $ref: '#/components/messages/SensoryInputEvent'
    description: |
      Raw sensory input events from family devices.
      Initial stage of cognitive processing pipeline with privacy controls.

  sensory/processed/{family_id}/{cognitive_trace_id}:
    address: sensory/processed/{family_id}/{cognitive_trace_id}
    parameters:
      family_id:
        $ref: '#/components/parameters/FamilyId'
      cognitive_trace_id:
        $ref: '#/components/parameters/CognitiveTraceId'
    messages:
      ProcessedSensoryEvent:
        $ref: '#/components/messages/ProcessedSensoryEvent'
    description: |
      Processed sensory events after P01-P05 pipeline stages.
      Family-scoped with cognitive trace correlation for downstream processing.

  # Cortical Processing Events (P11-P15)
  cortical/semantic/{family_id}/{cognitive_trace_id}:
    address: cortical/semantic/{family_id}/{cognitive_trace_id}
    parameters:
      family_id:
        $ref: '#/components/parameters/FamilyId'
      cognitive_trace_id:
        $ref: '#/components/parameters/CognitiveTraceId'
    messages:
      SemanticProcessingEvent:
        $ref: '#/components/messages/SemanticProcessingEvent'
    description: |
      Semantic processing events for meaning extraction and knowledge integration.
      Family context-aware semantic understanding with relationship preservation.

  cortical/integration/{family_id}/{cognitive_trace_id}:
    address: cortical/integration/{family_id}/{cognitive_trace_id}
    parameters:
      family_id:
        $ref: '#/components/parameters/FamilyId'
      cognitive_trace_id:
        $ref: '#/components/parameters/CognitiveTraceId'
    messages:
      CorticalIntegrationEvent:
        $ref: '#/components/messages/CorticalIntegrationEvent'
    description: |
      Cortical integration events for binding new information with existing knowledge.
      Maintains family knowledge consistency and relationship coherence.

  # Action Planning Events (P16-P20)
  action/planning/{family_id}/{cognitive_trace_id}:
    address: action/planning/{family_id}/{cognitive_trace_id}
    parameters:
      family_id:
        $ref: '#/components/parameters/FamilyId'
      cognitive_trace_id:
        $ref: '#/components/parameters/CognitiveTraceId'
    messages:
      ActionPlanningEvent:
        $ref: '#/components/messages/ActionPlanningEvent'
    description: |
      Action planning events for cognitive-to-action pipeline coordination.
      Family-safe action planning with supervision and consent requirements.

  action/execution/{family_id}/{action_id}:
    address: action/execution/{family_id}/{action_id}
    parameters:
      family_id:
        $ref: '#/components/parameters/FamilyId'
      action_id:
        $ref: '#/components/parameters/ActionId'
    messages:
      ActionExecutionEvent:
        $ref: '#/components/messages/ActionExecutionEvent'
    description: |
      Action execution events for real-world action coordination.
      Family safety controls and supervision requirements enforced.

  # System and Health Events
  cognitive/health/{component_id}:
    address: cognitive/health/{component_id}
    parameters:
      component_id:
        $ref: '#/components/parameters/ComponentId'
    messages:
      CognitiveHealthEvent:
        $ref: '#/components/messages/CognitiveHealthEvent'
    description: |
      Cognitive system health events for monitoring and alerting.
      Component-level health tracking for cognitive pipeline reliability.

  cognitive/performance/{family_id}:
    address: cognitive/performance/{family_id}
    parameters:
      family_id:
        $ref: '#/components/parameters/FamilyId'
    messages:
      CognitivePerformanceEvent:
        $ref: '#/components/messages/CognitivePerformanceEvent'
    description: |
      Cognitive performance events for optimization and analysis.
      Family-scoped performance metrics with privacy protection.

operations:
  # Cognitive Processing Operations
  ProcessCognitiveTrace:
    action: send
    channel:
      $ref: '#/channels/cognitive~1trace~1{cognitive_trace_id}'
    messages:
      - $ref: '#/channels/cognitive~1trace~1{cognitive_trace_id}/messages/CognitiveTraceEvent'
    description: |
      Publish cognitive trace events for end-to-end processing correlation.
      Used by all cognitive pipelines to maintain trace continuity.

  ReceiveCognitiveTrace:
    action: receive
    channel:
      $ref: '#/channels/cognitive~1trace~1{cognitive_trace_id}'
    messages:
      - $ref: '#/channels/cognitive~1trace~1{cognitive_trace_id}/messages/CognitiveTraceEvent'
    description: |
      Subscribe to cognitive trace events for downstream processing.
      Enables pipeline coordination and state synchronization.

  ProcessPipelineStage:
    action: send
    channel:
      $ref: '#/channels/cognitive~1pipeline~1{pipeline_id}~1stage~1{stage_id}'
    messages:
      - $ref: '#/channels/cognitive~1pipeline~1{pipeline_id}~1stage~1{stage_id}/messages/PipelineStageEvent'
    description: |
      Publish pipeline stage completion events for coordination.
      Each P01-P20 stage publishes completion with output data.

  # Memory Operations
  FormMemory:
    action: send
    channel:
      $ref: '#/channels/memory~1formation~1{family_id}'
    messages:
      - $ref: '#/channels/memory~1formation~1{family_id}/messages/MemoryFormationEvent'
    description: |
      Publish memory formation events from hippocampal processing.
      Triggers episodic storage and associative memory building.

  ConsolidateMemory:
    action: send
    channel:
      $ref: '#/channels/memory~1consolidation~1{family_id}'
    messages:
      - $ref: '#/channels/memory~1consolidation~1{family_id}/messages/MemoryConsolidationEvent'
    description: |
      Publish memory consolidation events for long-term storage.
      Includes family importance scoring and relationship preservation.

  RetrieveMemory:
    action: send
    channel:
      $ref: '#/channels/memory~1retrieval~1{family_id}'
    messages:
      - $ref: '#/channels/memory~1retrieval~1{family_id}/messages/MemoryRetrievalEvent'
    description: |
      Publish memory retrieval events for cognitive processing.
      Maintains privacy controls and family context awareness.

  # Family Context Operations
  UpdateFamilyRelationship:
    action: send
    channel:
      $ref: '#/channels/family~1relationship~1{family_id}'
    messages:
      - $ref: '#/channels/family~1relationship~1{family_id}/messages/FamilyRelationshipEvent'
    description: |
      Publish family relationship context updates.
      Enables relationship-aware cognitive processing across pipelines.

  CoordinateFamily:
    action: send
    channel:
      $ref: '#/channels/family~1coordination~1{family_id}'
    messages:
      - $ref: '#/channels/family~1coordination~1{family_id}/messages/FamilyCoordinationEvent'
    description: |
      Publish family coordination events for multi-member decisions.
      Enables synchronized family AI experiences and consensus building.

components:
  securitySchemes:
    FamilyOSAuth:
      type: oauth2
      flows:
        clientCredentials:
          tokenUrl: https://auth.familyos.local/oauth/token
          availableScopes:
            cognitive:events:publish: Publish cognitive events
            cognitive:events:subscribe: Subscribe to cognitive events
            memory:events: Access memory formation events
            family:events: Access family context events
            system:events: Access system health events

  parameters:
    CognitiveTraceId:
      description: Unique identifier for cognitive processing trace
      location: $message.payload#/cognitive_trace_id

    FamilyId:
      description: Family identifier for privacy and context scoping
      location: $message.payload#/family_id

    DeviceId:
      description: Device identifier for user-specific processing
      location: $message.payload#/device_id

    PipelineId:
      description: Cognitive pipeline identifier (P01-P20)
      location: $message.payload#/pipeline_id

    StageId:
      description: Pipeline stage identifier within a pipeline
      location: $message.payload#/stage_id

    ActionId:
      description: Action execution identifier
      location: $message.payload#/action_id

    ComponentId:
      description: Cognitive component identifier for health monitoring
      location: $message.payload#/component_id

  messages:
    CognitiveTraceEvent:
      name: CognitiveTraceEvent
      title: Cognitive Processing Trace Event
      summary: End-to-end cognitive processing trace correlation
      contentType: application/json
      headers:
        type: object
        properties:
          cognitive_trace_id:
            type: string
            format: uuid
          family_id:
            type: string
            format: uuid
          device_id:
            type: string
            format: uuid
          timestamp:
            type: string
            format: date-time
          priority:
            type: string
            enum: [low, normal, high, critical]
      payload:
        $ref: '#/components/schemas/CognitiveTracePayload'

    PipelineStageEvent:
      name: PipelineStageEvent
      title: Cognitive Pipeline Stage Event
      summary: Individual cognitive pipeline stage processing event
      contentType: application/json
      headers:
        type: object
        properties:
          cognitive_trace_id:
            type: string
            format: uuid
          pipeline_id:
            type: string
          stage_id:
            type: string
          family_id:
            type: string
            format: uuid
          processing_time_ms:
            type: integer
          timestamp:
            type: string
            format: date-time
      payload:
        $ref: '#/components/schemas/PipelineStagePayload'

    MemoryFormationEvent:
      name: MemoryFormationEvent
      title: Memory Formation Event
      summary: Hippocampal memory formation and episodic storage
      contentType: application/json
      headers:
        type: object
        properties:
          memory_id:
            type: string
            format: uuid
          cognitive_trace_id:
            type: string
            format: uuid
          family_id:
            type: string
            format: uuid
          formation_type:
            type: string
            enum: [episodic, semantic, procedural, emotional]
          timestamp:
            type: string
            format: date-time
      payload:
        $ref: '#/components/schemas/MemoryFormationPayload'

    MemoryConsolidationEvent:
      name: MemoryConsolidationEvent
      title: Memory Consolidation Event
      summary: Memory consolidation from hippocampus to cortical storage
      contentType: application/json
      headers:
        type: object
        properties:
          memory_id:
            type: string
            format: uuid
          consolidation_id:
            type: string
            format: uuid
          family_id:
            type: string
            format: uuid
          consolidation_stage:
            type: string
            enum: [initiated, processing, completed, failed]
          timestamp:
            type: string
            format: date-time
      payload:
        $ref: '#/components/schemas/MemoryConsolidationPayload'

    MemoryRetrievalEvent:
      name: MemoryRetrievalEvent
      title: Memory Retrieval Event
      summary: Memory retrieval for cognitive processing
      contentType: application/json
      headers:
        type: object
        properties:
          retrieval_id:
            type: string
            format: uuid
          cognitive_trace_id:
            type: string
            format: uuid
          family_id:
            type: string
            format: uuid
          retrieval_type:
            type: string
            enum: [episodic, semantic, associative, emotional]
          timestamp:
            type: string
            format: date-time
      payload:
        $ref: '#/components/schemas/MemoryRetrievalPayload'

    AttentionFocusEvent:
      name: AttentionFocusEvent
      title: Attention Focus Event
      summary: Cognitive attention focus and resource allocation
      contentType: application/json
      headers:
        type: object
        properties:
          attention_id:
            type: string
            format: uuid
          cognitive_trace_id:
            type: string
            format: uuid
          family_id:
            type: string
            format: uuid
          device_id:
            type: string
            format: uuid
          focus_type:
            type: string
            enum: [visual, auditory, tactile, cognitive, emotional]
          timestamp:
            type: string
            format: date-time
      payload:
        $ref: '#/components/schemas/AttentionFocusPayload'

    WorkingMemoryEvent:
      name: WorkingMemoryEvent
      title: Working Memory Event
      summary: Working memory state updates during cognitive processing
      contentType: application/json
      headers:
        type: object
        properties:
          working_memory_id:
            type: string
            format: uuid
          cognitive_trace_id:
            type: string
            format: uuid
          family_id:
            type: string
            format: uuid
          update_type:
            type: string
            enum: [store, retrieve, update, clear, refresh]
          timestamp:
            type: string
            format: date-time
      payload:
        $ref: '#/components/schemas/WorkingMemoryPayload'

    FamilyRelationshipEvent:
      name: FamilyRelationshipEvent
      title: Family Relationship Context Event
      summary: Family relationship dynamics and context updates
      contentType: application/json
      headers:
        type: object
        properties:
          relationship_id:
            type: string
            format: uuid
          family_id:
            type: string
            format: uuid
          relationship_type:
            type: string
          context_change:
            type: string
            enum: [quality, dynamics, communication, conflict, cooperation]
          timestamp:
            type: string
            format: date-time
      payload:
        $ref: '#/components/schemas/FamilyRelationshipPayload'

    FamilyEmotionalEvent:
      name: FamilyEmotionalEvent
      title: Family Emotional Context Event
      summary: Family emotional climate and individual emotional states
      contentType: application/json
      headers:
        type: object
        properties:
          emotional_id:
            type: string
            format: uuid
          family_id:
            type: string
            format: uuid
          emotional_scope:
            type: string
            enum: [individual, dyadic, family, extended]
          emotional_intensity:
            type: number
            minimum: 0
            maximum: 1
          timestamp:
            type: string
            format: date-time
      payload:
        $ref: '#/components/schemas/FamilyEmotionalPayload'

    FamilyCoordinationEvent:
      name: FamilyCoordinationEvent
      title: Family Coordination Event
      summary: Multi-member decision making and consensus building
      contentType: application/json
      headers:
        type: object
        properties:
          coordination_id:
            type: string
            format: uuid
          family_id:
            type: string
            format: uuid
          coordination_type:
            type: string
            enum: [consensus, delegation, majority, emergency]
          participants_count:
            type: integer
            minimum: 1
          timestamp:
            type: string
            format: date-time
      payload:
        $ref: '#/components/schemas/FamilyCoordinationPayload'

    SensoryInputEvent:
      name: SensoryInputEvent
      title: Sensory Input Event
      summary: Raw sensory input from family devices
      contentType: application/json
      headers:
        type: object
        properties:
          sensory_id:
            type: string
            format: uuid
          device_id:
            type: string
            format: uuid
          sensory_type:
            type: string
            enum: [visual, auditory, tactile, olfactory, gustatory, proprioceptive]
          data_size_bytes:
            type: integer
          timestamp:
            type: string
            format: date-time
      payload:
        $ref: '#/components/schemas/SensoryInputPayload'

    ProcessedSensoryEvent:
      name: ProcessedSensoryEvent
      title: Processed Sensory Event
      summary: Processed sensory data after P01-P05 pipelines
      contentType: application/json
      headers:
        type: object
        properties:
          processed_id:
            type: string
            format: uuid
          cognitive_trace_id:
            type: string
            format: uuid
          family_id:
            type: string
            format: uuid
          processing_pipeline:
            type: string
            pattern: "^P0[1-5]$"
          confidence_score:
            type: number
            minimum: 0
            maximum: 1
          timestamp:
            type: string
            format: date-time
      payload:
        $ref: '#/components/schemas/ProcessedSensoryPayload'

    SemanticProcessingEvent:
      name: SemanticProcessingEvent
      title: Semantic Processing Event
      summary: Semantic meaning extraction and knowledge integration
      contentType: application/json
      headers:
        type: object
        properties:
          semantic_id:
            type: string
            format: uuid
          cognitive_trace_id:
            type: string
            format: uuid
          family_id:
            type: string
            format: uuid
          semantic_type:
            type: string
            enum: [concept, relation, emotion, intention, knowledge]
          confidence_score:
            type: number
            minimum: 0
            maximum: 1
          timestamp:
            type: string
            format: date-time
      payload:
        $ref: '#/components/schemas/SemanticProcessingPayload'

    CorticalIntegrationEvent:
      name: CorticalIntegrationEvent
      title: Cortical Integration Event
      summary: Integration of new information with existing knowledge
      contentType: application/json
      headers:
        type: object
        properties:
          integration_id:
            type: string
            format: uuid
          cognitive_trace_id:
            type: string
            format: uuid
          family_id:
            type: string
            format: uuid
          integration_type:
            type: string
            enum: [binding, association, consolidation, update]
          integration_quality:
            type: number
            minimum: 0
            maximum: 1
          timestamp:
            type: string
            format: date-time
      payload:
        $ref: '#/components/schemas/CorticalIntegrationPayload'

    ActionPlanningEvent:
      name: ActionPlanningEvent
      title: Action Planning Event
      summary: Cognitive action planning for P16-P20 pipelines
      contentType: application/json
      headers:
        type: object
        properties:
          plan_id:
            type: string
            format: uuid
          cognitive_trace_id:
            type: string
            format: uuid
          family_id:
            type: string
            format: uuid
          action_type:
            type: string
          safety_level:
            type: string
            enum: [safe, supervised, restricted, blocked]
          timestamp:
            type: string
            format: date-time
      payload:
        $ref: '#/components/schemas/ActionPlanningPayload'

    ActionExecutionEvent:
      name: ActionExecutionEvent
      title: Action Execution Event
      summary: Real-world action execution with family safety controls
      contentType: application/json
      headers:
        type: object
        properties:
          execution_id:
            type: string
            format: uuid
          action_id:
            type: string
            format: uuid
          family_id:
            type: string
            format: uuid
          execution_status:
            type: string
            enum: [planned, approved, executing, completed, failed, cancelled]
          safety_verified:
            type: boolean
          timestamp:
            type: string
            format: date-time
      payload:
        $ref: '#/components/schemas/ActionExecutionPayload'

    CognitiveHealthEvent:
      name: CognitiveHealthEvent
      title: Cognitive System Health Event
      summary: Health monitoring for cognitive components
      contentType: application/json
      headers:
        type: object
        properties:
          health_id:
            type: string
            format: uuid
          component_id:
            type: string
          health_status:
            type: string
            enum: [healthy, degraded, unhealthy, offline]
          severity:
            type: string
            enum: [info, warning, error, critical]
          timestamp:
            type: string
            format: date-time
      payload:
        $ref: '#/components/schemas/CognitiveHealthPayload'

    CognitivePerformanceEvent:
      name: CognitivePerformanceEvent
      title: Cognitive Performance Event
      summary: Performance metrics for cognitive processing optimization
      contentType: application/json
      headers:
        type: object
        properties:
          performance_id:
            type: string
            format: uuid
          family_id:
            type: string
            format: uuid
          metric_type:
            type: string
            enum: [latency, throughput, accuracy, resource_usage, quality]
          measurement_period:
            type: string
          timestamp:
            type: string
            format: date-time
      payload:
        $ref: '#/components/schemas/CognitivePerformancePayload'

  schemas:
    # Cognitive Processing Schemas
    CognitiveTracePayload:
      type: object
      properties:
        trace_operation:
          type: string
          enum: [start, continue, complete, error, timeout]
        pipeline_sequence:
          type: array
          items:
            type: string
            pattern: "^P(0[1-9]|1[0-9]|20)$"
        current_pipeline:
          type: string
          pattern: "^P(0[1-9]|1[0-9]|20)$"
        processing_context:
          $ref: '#/components/schemas/ProcessingContext'
        family_context:
          $ref: '#/components/schemas/FamilyEventContext'
        error_information:
          $ref: '#/components/schemas/ErrorInformation'
        performance_metrics:
          $ref: '#/components/schemas/PerformanceMetrics'
      required: [trace_operation, current_pipeline, processing_context, family_context]

    PipelineStagePayload:
      type: object
      properties:
        stage_operation:
          type: string
          enum: [start, processing, complete, error, skip]
        input_data:
          type: object
          description: Encrypted input data for stage processing
        output_data:
          type: object
          description: Encrypted output data from stage processing
        processing_metrics:
          $ref: '#/components/schemas/ProcessingMetrics'
        quality_metrics:
          $ref: '#/components/schemas/QualityMetrics'
        next_stage:
          type: string
        family_safety_check:
          $ref: '#/components/schemas/FamilySafetyCheck'
      required: [stage_operation, processing_metrics, family_safety_check]

    # Memory Event Schemas
    MemoryFormationPayload:
      type: object
      properties:
        memory_content:
          type: object
          description: Encrypted memory content
        memory_type:
          type: string
          enum: [episodic, semantic, procedural, emotional, associative]
        hippocampal_encoding:
          $ref: '#/components/schemas/HippocampalEncoding'
        family_associations:
          type: array
          items:
            $ref: '#/components/schemas/FamilyAssociation'
        emotional_context:
          $ref: '#/components/schemas/EmotionalContext'
        consolidation_priority:
          type: integer
          minimum: 1
          maximum: 10
        privacy_level:
          type: string
          enum: [personal, selective, shared, extended, interfamily]
      required: [memory_content, memory_type, hippocampal_encoding, family_associations]

    MemoryConsolidationPayload:
      type: object
      properties:
        consolidation_type:

          type: string
          enum: [automatic, triggered, forced, emergency]
        source_memory:
          $ref: '#/components/schemas/SourceMemoryReference'
        consolidation_criteria:
          $ref: '#/components/schemas/ConsolidationCriteria'
        family_importance_score:
          type: number
          minimum: 0
          maximum: 1
        cortical_binding:
          $ref: '#/components/schemas/CorticalBinding'
        consolidation_result:
          $ref: '#/components/schemas/ConsolidationResult'
      required: [consolidation_type, source_memory, consolidation_criteria]

    MemoryRetrievalPayload:
      type: object
      properties:
        retrieval_type:
          type: string
          enum: [direct, associative, contextual, emotional, temporal]
        retrieval_cue:
          $ref: '#/components/schemas/RetrievalCue'
        retrieved_memories:
          type: array
          items:
            $ref: '#/components/schemas/RetrievedMemoryReference'
        retrieval_confidence:
          type: number
          minimum: 0
          maximum: 1
        family_relevance:
          type: number
          minimum: 0
          maximum: 1
        privacy_filtered:
          type: boolean
        age_appropriate:
          type: boolean
      required: [retrieval_type, retrieval_cue, retrieved_memories]

    # Attention and Working Memory Schemas
    AttentionFocusPayload:
      type: object
      properties:
        focus_operation:
          type: string
          enum: [engage, shift, sustain, disengage, interrupt]
        attention_target:
          $ref: '#/components/schemas/AttentionTarget'
        focus_intensity:
          type: number
          minimum: 0
          maximum: 1
        focus_duration:
          type: integer
          description: Expected focus duration in milliseconds
        competing_stimuli:
          type: array
          items:
            $ref: '#/components/schemas/CompetingStimulus'
        family_distraction_level:
          type: number
          minimum: 0
          maximum: 1
        attention_resources:
          $ref: '#/components/schemas/AttentionResources'
      required: [focus_operation, attention_target, focus_intensity]

    WorkingMemoryPayload:
      type: object
      properties:
        memory_operation:
          type: string
          enum: [store, retrieve, update, refresh, clear, capacity_check]
        memory_content:
          type: object
          description: Encrypted working memory content
        memory_slot:
          type: integer
          minimum: 1
          maximum: 20
        retention_duration:
          type: integer
          description: Expected retention in milliseconds
        family_context_active:
          type: boolean
        interference_risk:
          type: number
          minimum: 0
          maximum: 1
        capacity_utilization:
          type: number
          minimum: 0
          maximum: 1
      required: [memory_operation, memory_slot, family_context_active]

    # Family Context Event Schemas
    FamilyRelationshipPayload:
      type: object
      properties:
        relationship_update:
          type: string
          enum: [quality_change, communication_pattern, conflict_resolution, bonding_activity]
        participants:
          type: array
          items:
            type: string
            format: uuid
        relationship_metrics:
          $ref: '#/components/schemas/RelationshipMetrics'
        communication_quality:
          type: number
          minimum: 0
          maximum: 1
        emotional_connection:
          type: number
          minimum: 0
          maximum: 1
        conflict_level:
          type: number
          minimum: 0
          maximum: 1
        support_level:
          type: number
          minimum: 0
          maximum: 1
        privacy_level:
          type: string
          enum: [personal, selective, shared, extended, interfamily]
      required: [relationship_update, participants, relationship_metrics]

    FamilyEmotionalPayload:
      type: object
      properties:
        emotional_event:
          type: string
          enum: [mood_change, emotional_contagion, regulation_needed, climate_shift]
        emotional_state:
          $ref: '#/components/schemas/EmotionalState'
        affected_members:
          type: array
          items:
            type: string
            format: uuid
        emotional_intensity:
          type: number
          minimum: 0
          maximum: 1
        emotional_valence:
          type: number
          minimum: -1
          maximum: 1
        contagion_risk:
          type: number
          minimum: 0
          maximum: 1
        regulation_intervention:
          $ref: '#/components/schemas/RegulationIntervention'
      required: [emotional_event, emotional_state, affected_members]

    FamilyCoordinationPayload:
      type: object
      properties:
        coordination_event:
          type: string
          enum: [decision_request, consensus_building, vote_cast, decision_final]
        decision_context:
          $ref: '#/components/schemas/DecisionContext'
        participants:
          type: array
          items:
            $ref: '#/components/schemas/CoordinationParticipant'
        consensus_level:
          type: number
          minimum: 0
          maximum: 1
        decision_urgency:
          type: string
          enum: [low, normal, high, emergency]
        coordination_result:
          $ref: '#/components/schemas/CoordinationResult'
        family_impact:
          type: string
          enum: [individual, dyadic, family, extended]
      required: [coordination_event, decision_context, participants]

    # Sensory Processing Schemas
    SensoryInputPayload:
      type: object
      properties:
        sensory_data:
          type: object
          description: Encrypted raw sensory data
        data_quality:
          type: number
          minimum: 0
          maximum: 1
        noise_level:
          type: number
          minimum: 0
          maximum: 1
        device_capabilities:
          $ref: '#/components/schemas/DeviceCapabilities'
        environmental_context:
          $ref: '#/components/schemas/EnvironmentalContext'
        privacy_requirements:
          $ref: '#/components/schemas/PrivacyRequirements'
        family_present:
          type: boolean
        age_appropriate:
          type: boolean
      required: [sensory_data, data_quality, device_capabilities]

    ProcessedSensoryPayload:
      type: object
      properties:
        processed_features:
          type: object
          description: Encrypted processed sensory features
        feature_confidence:
          type: number
          minimum: 0
          maximum: 1
        processing_quality:
          type: number
          minimum: 0
          maximum: 1
        family_relevance:
          type: number
          minimum: 0
          maximum: 1
        emotional_markers:
          type: array
          items:
            $ref: '#/components/schemas/EmotionalMarker'
        attention_triggers:
          type: array
          items:
            $ref: '#/components/schemas/AttentionTrigger'
        next_pipeline_ready:
          type: boolean
      required: [processed_features, feature_confidence, processing_quality]

    # Cortical Processing Schemas
    SemanticProcessingPayload:
      type: object
      properties:
        semantic_concepts:
          type: array
          items:
            $ref: '#/components/schemas/SemanticConcept'
        concept_confidence:
          type: number
          minimum: 0
          maximum: 1
        knowledge_integration:
          $ref: '#/components/schemas/KnowledgeIntegration'
        family_semantic_context:
          $ref: '#/components/schemas/FamilySemanticContext'
        cultural_context:
          $ref: '#/components/schemas/CulturalContext'
        age_appropriate_content:
          type: boolean
        content_filtering_applied:
          type: boolean
      required: [semantic_concepts, concept_confidence, knowledge_integration]

    CorticalIntegrationPayload:
      type: object
      properties:
        integration_type:
          type: string
          enum: [concept_binding, memory_binding, knowledge_update, schema_modification]
        binding_strength:
          type: number
          minimum: 0
          maximum: 1
        integration_quality:
          type: number
          minimum: 0
          maximum: 1
        knowledge_coherence:
          type: number
          minimum: 0
          maximum: 1
        family_knowledge_impact:
          $ref: '#/components/schemas/FamilyKnowledgeImpact'
        schema_updates:
          type: array
          items:
            $ref: '#/components/schemas/SchemaUpdate'
        consolidation_recommended:
          type: boolean
      required: [integration_type, binding_strength, integration_quality]

    # Action Processing Schemas
    ActionPlanningPayload:
      type: object
      properties:
        planned_actions:
          type: array
          items:
            $ref: '#/components/schemas/PlannedAction'
        action_sequence:
          type: array
          items:
            type: string
            format: uuid
        safety_analysis:
          $ref: '#/components/schemas/SafetyAnalysis'
        family_impact_assessment:
          $ref: '#/components/schemas/FamilyImpactAssessment'
        supervision_requirements:
          $ref: '#/components/schemas/SupervisionRequirements'
        consent_requirements:
          $ref: '#/components/schemas/ConsentRequirements'
        execution_readiness:
          type: number
          minimum: 0
          maximum: 1
      required: [planned_actions, safety_analysis, family_impact_assessment]

    ActionExecutionPayload:
      type: object
      properties:
        execution_plan:
          $ref: '#/components/schemas/ExecutionPlan'
        execution_progress:
          type: number
          minimum: 0
          maximum: 1
        safety_monitoring:
          $ref: '#/components/schemas/SafetyMonitoring'
        family_coordination:
          $ref: '#/components/schemas/FamilyActionCoordination'
        real_world_effects:
          type: array
          items:
            $ref: '#/components/schemas/RealWorldEffect'
        rollback_capability:
          type: boolean
        execution_result:
          $ref: '#/components/schemas/ExecutionResult'
      required: [execution_plan, execution_progress, safety_monitoring]

    # Health and Performance Schemas
    CognitiveHealthPayload:
      type: object
      properties:
        component_status:
          type: string
          enum: [healthy, degraded, unhealthy, offline]
        health_metrics:
          $ref: '#/components/schemas/HealthMetrics'
        error_information:
          $ref: '#/components/schemas/ErrorInformation'
        performance_impact:
          type: string
          enum: [none, minimal, moderate, significant, severe]
        recovery_actions:
          type: array
          items:
            type: string
        family_service_impact:
          type: string
          enum: [none, minimal, moderate, significant, severe]
      required: [component_status, health_metrics]

    CognitivePerformancePayload:
      type: object
      properties:
        performance_metrics:
          $ref: '#/components/schemas/PerformanceMetrics'
        throughput_metrics:
          $ref: '#/components/schemas/ThroughputMetrics'
        quality_metrics:
          $ref: '#/components/schemas/QualityMetrics'
        resource_utilization:
          $ref: '#/components/schemas/ResourceUtilization'
        family_satisfaction_score:
          type: number
          minimum: 0
          maximum: 1
        optimization_recommendations:
          type: array
          items:
            type: string
      required: [performance_metrics, throughput_metrics, quality_metrics]

    # Supporting Schemas
    ProcessingContext:
      type: object
      properties:
        session_id:
          type: string
          format: uuid
        user_context:
          type: object
        device_context:
          type: object
        environmental_context:
          type: object
        temporal_context:
          type: object

    FamilyEventContext:
      type: object
      properties:
        family_structure:
          type: object
        active_relationships:
          type: array
          items:
            type: string
        current_family_mood:
          type: string
        privacy_level:
          type: string
        supervision_active:
          type: boolean

    ErrorInformation:
      type: object
      properties:
        error_code:
          type: string
        error_message:
          type: string
        error_category:
          type: string
        recovery_possible:
          type: boolean
        family_impact:
          type: string

    PerformanceMetrics:
      type: object
      properties:
        processing_time_ms:
          type: integer
        memory_usage_mb:
          type: number
        cpu_utilization:
          type: number
        quality_score:
          type: number
          minimum: 0
          maximum: 1

    QualityMetrics:
      type: object
      properties:
        accuracy_score:
          type: number
          minimum: 0
          maximum: 1
        confidence_score:
          type: number
          minimum: 0
          maximum: 1
        coherence_score:
          type: number
          minimum: 0
          maximum: 1
        family_appropriateness:
          type: number
          minimum: 0
          maximum: 1

    FamilySafetyCheck:
      type: object
      properties:
        safety_verified:
          type: boolean
        age_appropriate:
          type: boolean
        content_filtered:
          type: boolean
        supervision_required:
          type: boolean
        consent_verified:
          type: boolean

    # Missing Schema Definitions
    ProcessingMetrics:
      type: object
      properties:
        processing_time_ms:
          type: integer
        cpu_usage_percent:
          type: number
        memory_usage_mb:
          type: number
        throughput_rate:
          type: number

    HippocampalEncoding:
      type: object
      properties:
        encoding_strength:
          type: number
          minimum: 0
          maximum: 1
        memory_consolidation_priority:
          type: string
          enum: [low, medium, high, critical]
        temporal_context:
          type: object

    FamilyAssociation:
      type: object
      properties:
        member_id:
          type: string
          format: uuid
        relationship_type:
          type: string
        association_strength:
          type: number
          minimum: 0
          maximum: 1

    EmotionalContext:
      type: object
      properties:
        emotional_valence:
          type: number
          minimum: -1
          maximum: 1
        emotional_arousal:
          type: number
          minimum: 0
          maximum: 1
        emotion_labels:
          type: array
          items:
            type: string

    SourceMemoryReference:
      type: object
      properties:
        memory_id:
          type: string
          format: uuid
        memory_type:
          type: string
        confidence_score:
          type: number

    ConsolidationCriteria:
      type: object
      properties:
        importance_score:
          type: number
        repetition_count:
          type: integer
        emotional_significance:
          type: number

    CorticalBinding:
      type: object
      properties:
        binding_type:
          type: string
        binding_strength:
          type: number
        cortical_areas:
          type: array
          items:
            type: string

    ConsolidationResult:
      type: object
      properties:
        success:
          type: boolean
        new_memory_id:
          type: string
          format: uuid
        consolidation_score:
          type: number

    RetrievalCue:
      type: object
      properties:
        cue_type:
          type: string
        cue_content:
          type: object
        cue_strength:
          type: number

    RetrievedMemoryReference:
      type: object
      properties:
        memory_id:
          type: string
          format: uuid
        retrieval_confidence:
          type: number
        access_timestamp:
          type: string
          format: date-time

    AttentionTarget:
      type: object
      properties:
        target_type:
          type: string
        target_content:
          type: object
        salience_score:
          type: number

    CompetingStimulus:
      type: object
      properties:
        stimulus_type:
          type: string
        interference_level:
          type: number
        priority_score:
          type: number

    AttentionResources:
      type: object
      properties:
        available_capacity:
          type: number
        allocated_capacity:
          type: number
        efficiency_score:
          type: number

    RelationshipMetrics:
      type: object
      properties:
        relationship_strength:
          type: number
        interaction_frequency:
          type: number
        emotional_bonding:
          type: number

    EmotionalState:
      type: object
      properties:
        current_mood:
          type: string
        emotional_intensity:
          type: number
        regulation_needed:
          type: boolean

    RegulationIntervention:
      type: object
      properties:
        intervention_type:
          type: string
        intervention_intensity:
          type: number
        expected_outcome:
          type: string

    DecisionContext:
      type: object
      properties:
        decision_type:
          type: string
        urgency_level:
          type: string
        stakeholders:
          type: array
          items:
            type: string

    CoordinationParticipant:
      type: object
      properties:
        participant_id:
          type: string
          format: uuid
        role:
          type: string
        availability:
          type: boolean

    CoordinationResult:
      type: object
      properties:
        outcome:
          type: string
        consensus_level:
          type: number
        action_items:
          type: array
          items:
            type: string

    DeviceCapabilities:
      type: object
      properties:
        processing_power:
          type: string
        memory_capacity:
          type: string
        sensor_types:
          type: array
          items:
            type: string

    EnvironmentalContext:
      type: object
      properties:
        location:
          type: string
        ambient_conditions:
          type: object
        social_context:
          type: object

    PrivacyRequirements:
      type: object
      properties:
        privacy_level:
          type: string
          enum: [public, family, personal, sensitive]
        encryption_required:
          type: boolean
        retention_policy:
          type: string

    EmotionalMarker:
      type: object
      properties:
        emotion_type:
          type: string
        intensity:
          type: number
        confidence:
          type: number

    AttentionTrigger:
      type: object
      properties:
        trigger_type:
          type: string
        urgency:
          type: string
        response_required:
          type: boolean

    SemanticConcept:
      type: object
      properties:
        concept_id:
          type: string
        concept_label:
          type: string
        confidence_score:
          type: number

    KnowledgeIntegration:
      type: object
      properties:
        integration_type:
          type: string
        knowledge_base:
          type: string
        integration_score:
          type: number

    FamilySemanticContext:
      type: object
      properties:
        family_knowledge_domain:
          type: string
        relevance_score:
          type: number
        shared_understanding:
          type: boolean

    CulturalContext:
      type: object
      properties:
        cultural_framework:
          type: string
        cultural_sensitivity:
          type: number
        adaptation_needed:
          type: boolean

    FamilyKnowledgeImpact:
      type: object
      properties:
        impact_type:
          type: string
        impact_level:
          type: string
        affected_members:
          type: array
          items:
            type: string

    SchemaUpdate:
      type: object
      properties:
        schema_type:
          type: string
        update_operation:
          type: string
        update_content:
          type: object

    PlannedAction:
      type: object
      properties:
        action_id:
          type: string
          format: uuid
        action_type:
          type: string
        parameters:
          type: object

    SafetyAnalysis:
      type: object
      properties:
        safety_level:
          type: string
        risk_factors:
          type: array
          items:
            type: string
        mitigation_required:
          type: boolean

    FamilyImpactAssessment:
      type: object
      properties:
        impact_scope:
          type: string
        affected_relationships:
          type: array
          items:
            type: string
        approval_needed:
          type: boolean

    SupervisionRequirements:
      type: object
      properties:
        supervision_needed:
          type: boolean
        supervisor_role:
          type: string
        supervision_level:
          type: string

    ConsentRequirements:
      type: object
      properties:
        consent_needed:
          type: boolean
        consent_type:
          type: string
        consent_scope:
          type: string

    ExecutionPlan:
      type: object
      properties:
        plan_id:
          type: string
          format: uuid
        execution_steps:
          type: array
          items:
            type: object
        timeline:
          type: object

    SafetyMonitoring:
      type: object
      properties:
        monitoring_active:
          type: boolean
        safety_checks:
          type: array
          items:
            type: string
        alert_threshold:
          type: number

    FamilyActionCoordination:
      type: object
      properties:
        coordination_needed:
          type: boolean
        coordination_type:
          type: string
        participants:
          type: array
          items:
            type: string

    RealWorldEffect:
      type: object
      properties:
        effect_type:
          type: string
        effect_scope:
          type: string
        reversible:
          type: boolean

    ExecutionResult:
      type: object
      properties:
        success:
          type: boolean
        result_data:
          type: object
        execution_time:
          type: string
          format: date-time

    HealthMetrics:
      type: object
      properties:
        cpu_usage:
          type: number
        memory_usage:
          type: number
        response_time:
          type: number
        error_rate:
          type: number

    ThroughputMetrics:
      type: object
      properties:
        requests_per_second:
          type: number
        events_processed:
          type: integer
        average_processing_time:
          type: number

    ResourceUtilization:
      type: object
      properties:
        cpu_utilization:
          type: number
        memory_utilization:
          type: number
        network_utilization:
          type: number
        storage_utilization:
          type: number
