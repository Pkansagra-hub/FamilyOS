{
    "$schema": "https://json-schema.org/draft-07/schema#",
    "$id": "https://schemas.memoryos.ai/storage/store_reference.json",
    "title": "Storage Store Reference Schema",
    "description": "Schema for referencing storage stores in events",
    "type": "object",
    "required": [
        "store_name",
        "store_type"
    ],
    "properties": {
        "store_name": {
            "type": "string",
            "description": "Unique name of the storage store",
            "enum": [
                "EpisodicStore",
                "SemanticStore",
                "ReceiptsStore",
                "PrivacyStore",
                "EmbeddingsStore",
                "ConsolidationStore",
                "HippocampusStore",
                "ObservabilityStore",
                "MetricsStore",
                "ConfigStore",
                "CacheStore",
                "EventStore",
                "AuditStore",
                "BackupStore",
                "TempStore"
            ],
            "examples": [
                "EpisodicStore",
                "SemanticStore"
            ]
        },
        "store_type": {
            "type": "string",
            "description": "Type/technology of the storage store",
            "enum": [
                "postgresql",
                "redis",
                "elasticsearch",
                "vector_db",
                "s3",
                "filesystem",
                "memory",
                "graph_db"
            ],
            "examples": [
                "postgresql",
                "redis"
            ]
        },
        "store_instance": {
            "type": "string",
            "description": "Specific instance identifier for the store",
            "examples": [
                "episodic-primary",
                "semantic-replica-1",
                "cache-node-3"
            ]
        },
        "database_name": {
            "type": "string",
            "description": "Database name within the store",
            "examples": [
                "memoryos_episodic",
                "memoryos_semantic"
            ]
        },
        "schema_name": {
            "type": "string",
            "description": "Schema name within the database",
            "examples": [
                "public",
                "episodes_v2",
                "semantic_v1"
            ]
        },
        "table_name": {
            "type": "string",
            "description": "Table/collection name within the store",
            "examples": [
                "episodes",
                "semantic_nodes",
                "receipts"
            ]
        },
        "store_metadata": {
            "type": "object",
            "description": "Additional store-specific metadata",
            "properties": {
                "host": {
                    "type": "string",
                    "description": "Store host address",
                    "examples": [
                        "postgres-primary.storage.svc.cluster.local"
                    ]
                },
                "port": {
                    "type": "integer",
                    "description": "Store port number",
                    "minimum": 1,
                    "maximum": 65535,
                    "examples": [
                        5432,
                        6379
                    ]
                },
                "cluster_name": {
                    "type": "string",
                    "description": "Cluster name for distributed stores",
                    "examples": [
                        "storage-cluster",
                        "cache-cluster"
                    ]
                },
                "shard_id": {
                    "type": "string",
                    "description": "Shard identifier for partitioned stores",
                    "examples": [
                        "shard_001",
                        "shard_users_a_m"
                    ]
                },
                "replica_role": {
                    "type": "string",
                    "description": "Role of this store instance",
                    "enum": [
                        "primary",
                        "replica",
                        "standby"
                    ],
                    "examples": [
                        "primary",
                        "replica"
                    ]
                },
                "region": {
                    "type": "string",
                    "description": "Geographic region of store",
                    "examples": [
                        "us-east-1",
                        "eu-west-1"
                    ]
                },
                "availability_zone": {
                    "type": "string",
                    "description": "Availability zone of store",
                    "examples": [
                        "us-east-1a",
                        "eu-west-1b"
                    ]
                }
            },
            "additionalProperties": true
        },
        "store_version": {
            "type": "string",
            "description": "Version of the store software",
            "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$",
            "examples": [
                "14.9.0",
                "7.2.0"
            ]
        },
        "schema_version": {
            "type": "string",
            "description": "Version of the data schema",
            "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$",
            "examples": [
                "2.1.0",
                "1.3.5"
            ]
        }
    },
    "additionalProperties": false,
    "examples": [
        {
            "store_name": "EpisodicStore",
            "store_type": "postgresql",
            "store_instance": "episodic-primary",
            "database_name": "memoryos_episodic",
            "schema_name": "public",
            "table_name": "episodes",
            "store_metadata": {
                "host": "postgres-primary.storage.svc.cluster.local",
                "port": 5432,
                "cluster_name": "storage-cluster",
                "replica_role": "primary",
                "region": "us-east-1",
                "availability_zone": "us-east-1a"
            },
            "store_version": "14.9.0",
            "schema_version": "2.1.0"
        },
        {
            "store_name": "CacheStore",
            "store_type": "redis",
            "store_instance": "cache-node-1",
            "store_metadata": {
                "host": "redis-cluster.cache.svc.cluster.local",
                "port": 6379,
                "cluster_name": "cache-cluster",
                "shard_id": "shard_001"
            },
            "store_version": "7.2.0",
            "schema_version": "1.0.0"
        }
    ]
}
