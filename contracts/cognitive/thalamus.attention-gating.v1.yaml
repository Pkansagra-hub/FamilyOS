openapi: 3.1.0
info:
  title: Thalamus Attention Gating API
  version: 1.0.0
  description: |
    **Memory-Enhanced Thalamic Attention Gating for Family AI**

    Implements thalamic attention gating protocols for Memory-Centric Family AI,
    based on neuroscience research of thalamic attention control, salience detection,
    and cognitive resource allocation with family-aware prioritization and filtering.

    **Core Neuroscience Foundation:**
    - **Thalamic Nuclei:** Memory-enhanced sensory relay and attention filtering
    - **Reticular Formation:** Memory-driven arousal and attention regulation
    - **Pulvinar Complex:** Family-aware spatial and feature-based attention
    - **Salience Network:** Memory-coordinated stimulus significance evaluation

    **Memory-Centric Features:**
    - Family member priority weighting via memory backbone
    - Relationship-based attention allocation with memory patterns
    - Emergency and safety prioritization through memory coordination
    - Age-appropriate attention filtering with memory-driven adaptation

    **Family AI Integration:**
    - Memory-enhanced salience computation for family contexts
    - Cross-device attention coordination via memory backbone
    - Family safety signal amplification through memory patterns
    - Memory-driven cognitive resource allocation optimization

  contact:
    name: Cognitive Architecture Team
    url: https://family-os.memory.dev/cognitive/thalamus
  license:
    name: Proprietary
    url: https://family-os.memory.dev/license

servers:
  - url: https://api.family-os.memory.dev/v1
    description: Production Memory-Enhanced Thalamus Attention API
  - url: https://staging-api.family-os.memory.dev/v1
    description: Staging Memory-Enhanced Thalamus Attention API

tags:
  - name: Attention Gating
    description: Memory-enhanced attention gating decisions and stimulus filtering
  - name: Salience Evaluation
    description: Family memory-driven salience computation and prioritization
  - name: Cognitive Resources
    description: Memory-coordinated cognitive resource allocation and management
  - name: Thalamic Nuclei
    description: Thalamic nuclei status monitoring and family attention coordination
  - name: Family Attention
    description: Family-specific attention management and memory coordination

paths:

  /thalamus/attention-gate:
    post:
      summary: Process Memory-Enhanced Attention Gating
      description: |
        Process stimulus through thalamic attention gating with memory enhancement,
        family salience evaluation, and memory-driven gating decisions.
      operationId: processMemoryEnhancedAttentionGating
      tags: [Attention Gating]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AttentionGatingRequest'
      responses:
        '200':
          description: Attention gating decision processed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AttentionGatingResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

    get:
      summary: Get Family Memory Attention Gate Status
      description: |
        Retrieve attention gate status with family memory coordination,
        gating performance metrics, and cognitive resource allocation.
      operationId: getFamilyMemoryAttentionGateStatus
      tags: [Attention Gating]
      security:
        - BearerAuth: []
      parameters:
        - name: include_metrics
          in: query
          schema:
            type: boolean
            default: true
          description: Include performance metrics in response
        - name: family_scope
          in: query
          schema:
            type: string
            enum: [individual, family, comprehensive]
            default: family
          description: Scope of attention gate status
      responses:
        '200':
          description: Attention gate status retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AttentionGateStatusResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

  /thalamus/salience-evaluation:
    post:
      summary: Evaluate Family Memory Salience
      description: |
        Evaluate stimulus salience with family memory patterns,
        relationship-based scoring, and memory-driven prioritization.
      operationId: evaluateFamilyMemorySalience
      tags: [Salience Evaluation]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SalienceEvaluationRequest'
      responses:
        '200':
          description: Salience evaluation completed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SalienceEvaluationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

    get:
      summary: Get Memory-Driven Salience Metrics
      description: |
        Retrieve salience evaluation metrics with memory analysis,
        family relevance patterns, and attention prioritization trends.
      operationId: getMemoryDrivenSalienceMetrics
      tags: [Salience Evaluation]
      security:
        - BearerAuth: []
      parameters:
        - name: time_range
          in: query
          schema:
            type: string
            enum: [last_hour, last_day, last_week, last_month]
            default: last_day
          description: Time range for salience metrics
        - name: family_member_filter
          in: query
          schema:
            type: array
            items:
              type: string
              format: uuid
          description: Filter metrics by specific family members
      responses:
        '200':
          description: Salience metrics retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SalienceMetricsResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

  /thalamus/cognitive-resources:
    get:
      summary: Get Family Memory Cognitive Resources Status
      description: |
        Retrieve cognitive resource allocation status with family memory coordination,
        resource utilization metrics, and allocation optimization recommendations.
      operationId: getFamilyMemoryCognitiveResourcesStatus
      tags: [Cognitive Resources]
      security:
        - BearerAuth: []
      parameters:
        - name: resource_types
          in: query
          schema:
            type: array
            items:
              type: string
              enum: [attention, processing, memory, storage]
            default: [attention, processing, memory]
          description: Types of cognitive resources to include
        - name: optimization_level
          in: query
          schema:
            type: string
            enum: [basic, detailed, comprehensive]
            default: detailed
          description: Level of resource analysis detail
      responses:
        '200':
          description: Cognitive resources status retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CognitiveResourcesStatusResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

    post:
      summary: Optimize Memory-Coordinated Cognitive Resources
      description: |
        Optimize cognitive resource allocation with memory coordination,
        family priority balancing, and dynamic resource reallocation.
      operationId: optimizeMemoryCoordinatedCognitiveResources
      tags: [Cognitive Resources]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CognitiveResourceOptimizationRequest'
      responses:
        '200':
          description: Cognitive resource optimization applied successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CognitiveResourceOptimizationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

  /thalamus/nuclei/status:
    get:
      summary: Get Family Memory Thalamic Nuclei Status
      description: |
        Retrieve thalamic nuclei status with family memory coordination,
        nuclei performance metrics, and attention filtering effectiveness.
      operationId: getFamilyMemoryThalamiNucleiStatus
      tags: [Thalamic Nuclei]
      security:
        - BearerAuth: []
      parameters:
        - name: nuclei_types
          in: query
          schema:
            type: array
            items:
              type: string
              enum: [sensory_relay, association, intralaminar, all]
            default: [all]
          description: Types of thalamic nuclei to include
        - name: include_family_adaptations
          in: query
          schema:
            type: boolean
            default: true
          description: Include family-specific nuclei adaptations
      responses:
        '200':
          description: Thalamic nuclei status retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ThalamiNucleiStatusResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

  /thalamus/nuclei/{nuclei_type}/configure:
    post:
      summary: Configure Family Memory Nuclei
      description: |
        Configure specific thalamic nuclei with family memory coordination,
        attention filtering parameters, and family adaptation settings.
      operationId: configureFamilyMemoryNuclei
      tags: [Thalamic Nuclei]
      security:
        - BearerAuth: []
      parameters:
        - name: nuclei_type
          in: path
          required: true
          schema:
            type: string
            enum: [sensory_relay, association, intralaminar]
          description: Type of thalamic nuclei to configure
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NucleiConfigurationRequest'
      responses:
        '200':
          description: Nuclei configuration applied successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NucleiConfigurationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /thalamus/family-attention:
    get:
      summary: Get Family Memory Attention Coordination
      description: |
        Retrieve family attention coordination status with memory patterns,
        cross-device attention sync, and family priority management.
      operationId: getFamilyMemoryAttentionCoordination
      tags: [Family Attention]
      security:
        - BearerAuth: []
      parameters:
        - name: coordination_scope
          in: query
          schema:
            type: string
            enum: [individual, family, extended_family, comprehensive]
            default: family
          description: Scope of attention coordination analysis
        - name: include_memory_patterns
          in: query
          schema:
            type: boolean
            default: true
          description: Include memory-driven attention patterns
      responses:
        '200':
          description: Family attention coordination retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FamilyAttentionCoordinationResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

    post:
      summary: Coordinate Family Memory Attention
      description: |
        Coordinate attention across family members with memory enhancement,
        priority balancing, and cross-device attention synchronization.
      operationId: coordinateFamilyMemoryAttention
      tags: [Family Attention]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FamilyAttentionCoordinationRequest'
      responses:
        '200':
          description: Family attention coordination applied successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FamilyAttentionCoordinationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

  /thalamus/emergency-attention:
    post:
      summary: Activate Memory-Enhanced Emergency Attention
      description: |
        Activate emergency attention mode with memory coordination,
        family safety prioritization, and immediate attention allocation.
      operationId: activateMemoryEnhancedEmergencyAttention
      tags: [Family Attention]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EmergencyAttentionRequest'
      responses:
        '202':
          description: Emergency attention mode activated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EmergencyAttentionResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    AttentionGatingRequest:
      type: object
      required:
        - stimulus
        - family_context
        - gating_parameters
      properties:
        stimulus:
          type: object
          description: Stimulus requiring attention gating evaluation
          properties:
            stimulus_id:
              type: string
              format: uuid
              description: Unique stimulus identifier
            stimulus_type:
              type: string
              enum: [visual, auditory, tactile, multimodal, cognitive]
              description: Type of stimulus input
            content:
              type: object
              description: Stimulus content data
            metadata:
              type: object
              description: Stimulus metadata and context
        family_context:
          $ref: '#/components/schemas/FamilyContext'
        gating_parameters:
          type: object
          description: Attention gating processing parameters
          properties:
            urgency_level:
              type: string
              enum: [low, medium, high, emergency]
              default: medium
              description: Stimulus urgency assessment
            memory_enhancement:
              type: boolean
              default: true
              description: Enable memory-driven gating enhancement
            family_prioritization:
              type: boolean
              default: true
              description: Apply family-specific prioritization

    AttentionGatingResponse:
      type: object
      required:
        - gating_id
        - gating_decision
        - salience_score
        - resource_allocation
        - memory_coordination
      properties:
        gating_id:
          type: string
          format: uuid
          description: Attention gating operation identifier
        gating_decision:
          type: string
          enum: [admit, boost, defer, drop]
          description: Thalamic gating decision
        salience_score:
          type: number
          minimum: 0.0
          maximum: 1.0
          description: Computed stimulus salience score
        resource_allocation:
          $ref: '#/components/schemas/CognitiveResourceAllocation'
        memory_coordination:
          type: object
          description: Memory backbone coordination result
          properties:
            memory_pattern_match:
              type: boolean
              description: Whether stimulus matches known memory patterns
            family_relevance_enhancement:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Memory-enhanced family relevance score
            cross_device_gating_sync:
              type: boolean
              description: Cross-device gating coordination success
        processing_timeline:
          type: object
          description: Expected processing timeline
          properties:
            estimated_processing_time:
              type: string
              format: duration
            priority_queue_position:
              type: integer
              minimum: 0
            expected_completion:
              type: string
              format: date-time

    AttentionGateStatusResponse:
      type: object
      required:
        - gate_status
        - throughput_metrics
        - family_coordination_status
        - memory_integration_health
      properties:
        gate_status:
          type: string
          enum: [optimal, loaded, strained, overloaded, emergency_mode]
          description: Overall attention gate status
        throughput_metrics:
          type: object
          description: Attention gating throughput metrics
          properties:
            stimuli_per_minute:
              type: number
              description: Rate of stimulus processing
            admit_rate:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Percentage of stimuli admitted
            boost_rate:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Percentage of stimuli boosted
            defer_rate:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Percentage of stimuli deferred
            drop_rate:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Percentage of stimuli dropped
        family_coordination_status:
          type: object
          description: Family-specific coordination status
          properties:
            family_priority_balance:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Balance of attention across family members
            emergency_readiness:
              type: boolean
              description: Emergency attention mode readiness
            relationship_attention_health:
              type: object
              description: Attention health across family relationships
        memory_integration_health:
          type: object
          description: Memory backbone integration health
          properties:
            memory_pattern_utilization:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Utilization of memory patterns in gating
            cross_device_coordination_health:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Health of cross-device gating coordination
            family_memory_coherence:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Coherence of family memory in attention decisions

    SalienceEvaluationRequest:
      type: object
      required:
        - stimulus
        - evaluation_context
        - family_context
      properties:
        stimulus:
          type: object
          description: Stimulus for salience evaluation
          properties:
            stimulus_data:
              type: object
              description: Stimulus content and metadata
            stimulus_source:
              type: string
              description: Source of the stimulus
            timestamp:
              type: string
              format: date-time
              description: Stimulus occurrence timestamp
        evaluation_context:
          type: object
          description: Context for salience evaluation
          properties:
            evaluation_scope:
              type: string
              enum: [individual, family, comprehensive]
              default: family
              description: Scope of salience evaluation
            current_activity:
              type: string
              description: Current family activity context
            urgency_indicators:
              type: array
              items:
                type: string
              description: Urgency or priority indicators
        family_context:
          $ref: '#/components/schemas/FamilyContext'
        memory_integration:
          type: object
          description: Memory integration parameters
          properties:
            use_memory_patterns:
              type: boolean
              default: true
              description: Use memory patterns for salience evaluation
            cross_reference_family_history:
              type: boolean
              default: true
              description: Cross-reference with family memory history

    SalienceEvaluationResponse:
      type: object
      required:
        - evaluation_id
        - salience_score
        - salience_breakdown
        - family_relevance_analysis
        - memory_enhancement_impact
      properties:
        evaluation_id:
          type: string
          format: uuid
          description: Salience evaluation operation identifier
        salience_score:
          type: number
          minimum: 0.0
          maximum: 1.0
          description: Overall computed salience score
        salience_breakdown:
          type: object
          description: Breakdown of salience score components
          properties:
            family_relevance:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Family relevance component score
            emotional_significance:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Emotional significance component score
            safety_importance:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Safety importance component score
            relationship_context:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Relationship context component score
            temporal_urgency:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Temporal urgency component score
            content_appropriateness:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Content appropriateness component score
            novelty_significance:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Novelty significance component score
        family_relevance_analysis:
          type: object
          description: Detailed family relevance analysis
          properties:
            affected_family_members:
              type: array
              items:
                type: string
                format: uuid
              description: Family members affected by stimulus
            relationship_impact:
              type: object
              description: Impact on family relationships
            family_value_alignment:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Alignment with family values
        memory_enhancement_impact:
          type: object
          description: Impact of memory enhancement on salience
          properties:
            memory_pattern_relevance:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Relevance to known memory patterns
            family_history_significance:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Significance based on family history
            cross_device_pattern_consistency:
              type: boolean
              description: Consistency of patterns across devices

    SalienceMetricsResponse:
      type: object
      required:
        - metrics_summary
        - family_attention_patterns
        - memory_driven_insights
        - trend_analysis
      properties:
        metrics_summary:
          type: object
          description: Summary of salience evaluation metrics
          properties:
            total_evaluations:
              type: integer
              description: Total number of salience evaluations
            average_salience_score:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Average salience score
            high_salience_percentage:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Percentage of high salience stimuli
            family_relevance_distribution:
              type: object
              description: Distribution of family relevance scores
        family_attention_patterns:
          type: object
          description: Family-specific attention patterns
          properties:
            member_attention_distribution:
              type: object
              description: Distribution of attention across family members
            relationship_attention_patterns:
              type: object
              description: Attention patterns in family relationships
            temporal_attention_trends:
              type: object
              description: Temporal trends in family attention
        memory_driven_insights:
          type: object
          description: Insights from memory-driven analysis
          properties:
            memory_pattern_utilization:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Utilization of memory patterns in salience evaluation
            family_history_impact:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Impact of family history on salience decisions
            cross_device_consistency:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Consistency of salience evaluation across devices
        trend_analysis:
          type: object
          description: Trend analysis of salience metrics
          properties:
            salience_score_trends:
              type: object
              description: Trends in salience scores over time
            family_attention_evolution:
              type: object
              description: Evolution of family attention patterns
            memory_enhancement_effectiveness:
              type: object
              description: Effectiveness of memory enhancement over time

    CognitiveResourcesStatusResponse:
      type: object
      required:
        - resource_status
        - allocation_metrics
        - family_resource_coordination
        - memory_resource_integration
      properties:
        resource_status:
          type: string
          enum: [optimal, loaded, strained, overloaded, emergency_reallocation]
          description: Overall cognitive resource status
        allocation_metrics:
          type: object
          description: Cognitive resource allocation metrics
          properties:
            attention_resource_utilization:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Utilization of attention resources
            processing_resource_utilization:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Utilization of processing resources
            memory_resource_utilization:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Utilization of memory resources
            storage_resource_utilization:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Utilization of storage resources
        family_resource_coordination:
          type: object
          description: Family-specific resource coordination
          properties:
            family_member_resource_balance:
              type: object
              description: Resource allocation balance across family members
            emergency_resource_reserve:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Emergency resource reserve availability
            relationship_resource_allocation:
              type: object
              description: Resource allocation for relationship management
        memory_resource_integration:
          type: object
          description: Memory backbone resource integration
          properties:
            memory_processing_load:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Load on memory processing resources
            cross_device_resource_coordination:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Coordination of resources across devices
            memory_pattern_resource_efficiency:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Efficiency of memory pattern resource usage

    CognitiveResourceOptimizationRequest:
      type: object
      required:
        - optimization_strategy
        - target_metrics
        - family_priorities
      properties:
        optimization_strategy:
          type: string
          enum: [load_balancing, emergency_reallocation, efficiency_optimization, family_prioritization]
          description: Cognitive resource optimization strategy
        target_metrics:
          type: object
          description: Target optimization metrics
          properties:
            target_attention_utilization:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Target attention resource utilization
            target_processing_efficiency:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Target processing efficiency
            target_family_satisfaction:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Target family satisfaction level
        family_priorities:
          type: object
          description: Family-specific optimization priorities
          properties:
            emergency_priority_weight:
              type: number
              minimum: 0.0
              maximum: 1.0
              default: 0.3
              description: Weight for emergency resource allocation
            coordination_priority_weight:
              type: number
              minimum: 0.0
              maximum: 1.0
              default: 0.25
              description: Weight for family coordination resources
            individual_support_weight:
              type: number
              minimum: 0.0
              maximum: 1.0
              default: 0.2
              description: Weight for individual family member support
        memory_optimization:
          type: object
          description: Memory-specific optimization parameters
          properties:
            enable_memory_driven_optimization:
              type: boolean
              default: true
              description: Enable memory-driven resource optimization
            cross_device_optimization:
              type: boolean
              default: true
              description: Enable cross-device resource optimization
            memory_pattern_utilization:
              type: boolean
              default: true
              description: Utilize memory patterns for optimization

    CognitiveResourceOptimizationResponse:
      type: object
      required:
        - optimization_id
        - applied_optimizations
        - resource_improvement
        - family_impact_assessment
        - memory_coordination_impact
      properties:
        optimization_id:
          type: string
          format: uuid
          description: Cognitive resource optimization operation identifier
        applied_optimizations:
          type: array
          items:
            type: object
            properties:
              optimization_type:
                type: string
                description: Type of optimization applied
              effectiveness:
                type: number
                minimum: 0.0
                maximum: 1.0
                description: Effectiveness of the optimization
              resource_impact:
                type: object
                description: Impact on resource allocation
          description: List of applied optimizations
        resource_improvement:
          type: object
          description: Measured resource improvement
          properties:
            attention_efficiency_gain:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Improvement in attention efficiency
            processing_throughput_improvement:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Improvement in processing throughput
            memory_utilization_optimization:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Optimization of memory utilization
        family_impact_assessment:
          type: object
          description: Assessment of optimization impact on family
          properties:
            family_satisfaction_change:
              type: number
              minimum: -1.0
              maximum: 1.0
              description: Change in family satisfaction
            attention_balance_improvement:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Improvement in attention balance across family
            emergency_readiness_enhancement:
              type: boolean
              description: Enhancement of emergency response readiness
        memory_coordination_impact:
          type: object
          description: Impact on memory backbone coordination
          properties:
            memory_integration_improvement:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Improvement in memory integration efficiency
            cross_device_coordination_enhancement:
              type: boolean
              description: Enhancement of cross-device coordination
            family_memory_coherence_improvement:
              type: number
              minimum: 0.0
              maximum: 1.0
              description: Improvement in family memory coherence

    # Supporting schemas for complex objects
    FamilyContext:
      type: object
      required:
        - family_members
        - relationship_dynamics
        - emotional_context
      properties:
        family_members:
          type: array
          items:
            $ref: '#/components/schemas/FamilyMember'
        relationship_dynamics:
          type: object
        emotional_context:
          type: object
        temporal_context:
          type: object

    FamilyMember:
      type: object
      required:
        - member_id
        - role
        - emotional_state
      properties:
        member_id:
          type: string
          format: uuid
        role:
          type: string
          enum: [parent, child, guardian, extended_family]
        emotional_state:
          type: object
        cognitive_profile:
          type: object

    CognitiveResourceAllocation:
      type: object
      properties:
        allocated_attention:
          type: number
          minimum: 0.0
          maximum: 1.0
        allocated_processing:
          type: number
          minimum: 0.0
          maximum: 1.0
        allocated_memory:
          type: number
          minimum: 0.0
          maximum: 1.0
        priority_level:
          type: string
          enum: [low, medium, high, critical]

    # Additional supporting schemas would continue...
    # (Truncated for brevity - full implementation would include all referenced schemas)

  responses:
    BadRequest:
      description: Bad request - invalid parameters or malformed request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'

    Unauthorized:
      description: Unauthorized - authentication required
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'

    Forbidden:
      description: Forbidden - insufficient permissions
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'

    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'

    ErrorResponse:
      type: object
      required:
        - error
        - message
        - timestamp
      properties:
        error:
          type: string
          description: Error code or type
        message:
          type: string
          description: Human-readable error message
        details:
          type: object
          description: Additional error details
        timestamp:
          type: string
          format: date-time
          description: Error occurrence timestamp
        correlation_id:
          type: string
          format: uuid
          description: Request correlation identifier
        priority: "normal"

      learning_development:
        allocation_percentage: 15
        reserved: false
        priority: "normal"

      background_processing:
        allocation_percentage: 10
        reserved: false
        priority: "low"

  capacity_monitoring:
    description: "Monitor and manage cognitive system capacity"
    metrics:
      working_memory_utilization:
        measurement: "percentage_of_slots_occupied"
        thresholds:
          low: "< 30%"
          medium: "30-70%"
          high: "70-90%"
          critical: "> 90%"

      processing_queue_length:
        measurement: "number_of_queued_items"
        thresholds:
          normal: "< 10 items"
          elevated: "10-25 items"
          high: "25-50 items"
          critical: "> 50 items"

      response_latency:
        measurement: "average_processing_delay"
        thresholds:
          excellent: "< 100ms"
          good: "100-500ms"
          acceptable: "500ms-2s"
          poor: "> 2s"

# === ATTENTION FILTERING PROTOCOLS ===

filtering_mechanisms:
  age_appropriate_filtering:
    description: "Filter content based on family member ages"
    age_groups:
      toddler:
        age_range: "0-3 years"
        filtering_rules:
          - block_complex_concepts
          - enhance_simple_interactions
          - prioritize_safety_signals
          - filter_emotional_complexity

      child:
        age_range: "4-12 years"
        filtering_rules:
          - educational_content_enhancement
          - age_appropriate_entertainment
          - supervised_learning_prioritization
          - safety_awareness_appropriate

      teenager:
        age_range: "13-17 years"
        filtering_rules:
          - privacy_aware_filtering
          - educational_opportunity_enhancement
          - social_context_appropriate
          - independence_supportive

      adult:
        age_range: "18+ years"
        filtering_rules:
          - full_content_access
          - family_responsibility_prioritization
          - emergency_handling_capability
          - child_protection_awareness

  safety_filtering:
    description: "Safety-based content and context filtering"
    safety_categories:
      physical_safety:
        detection_patterns:
          - injury_language
          - dangerous_activity_mentions
          - emergency_keywords
        response_actions:
          - immediate_alert_generation
          - emergency_protocol_activation
          - family_notification_system

      emotional_safety:
        detection_patterns:
          - emotional_distress_indicators
          - conflict_escalation_signs
          - mental_health_concerns
        response_actions:
          - emotional_support_activation
          - conflict_mediation_protocols
          - professional_help_suggestions

      information_safety:
        detection_patterns:
          - inappropriate_content_for_age
          - privacy_violation_attempts
          - misinformation_indicators
        response_actions:
          - content_blocking
          - fact_checking_integration
          - educational_context_provision

# === FAMILY CONTEXT INTEGRATION ===

family_context_processing:
  relationship_dynamics:
    description: "Process family relationship context for attention decisions"
    relationship_factors:
      parent_child_dynamics:
        attention_modifications:
          - parental_guidance_prioritization
          - child_development_focus
          - safety_override_capabilities

      sibling_interactions:
        attention_modifications:
          - fairness_attention_distribution
          - conflict_prevention_focus
          - shared_activity_coordination

      extended_family_involvement:
        attention_modifications:
          - generational_respect_protocols
          - extended_family_coordination
          - cultural_context_consideration

  emotional_climate_integration:
    description: "Integrate family emotional state into attention processing"
    emotional_states:
      harmonious_family_state:
        attention_adjustments:
          - enhance_positive_interactions
          - maintain_emotional_balance
          - support_ongoing_positive_dynamics

      tense_family_state:
        attention_adjustments:
          - prioritize_de-escalation_opportunities
          - filter_additional_stressors
          - enhance_calming_influences

      crisis_family_state:
        attention_adjustments:
          - emergency_protocol_activation
          - crisis_resolution_focus
          - non_essential_filtering

# === BACKPRESSURE MANAGEMENT ===

backpressure_protocols:
  detection_mechanisms:
    queue_overflow:
      description: "Detect processing queue overflow conditions"
      thresholds:
        warning: "queue_length > 75% capacity"
        critical: "queue_length > 90% capacity"
        emergency: "queue_length = 100% capacity"

    processing_latency:
      description: "Detect excessive processing delays"
      thresholds:
        warning: "average_latency > 1 second"
        critical: "average_latency > 5 seconds"
        emergency: "average_latency > 10 seconds"

    cognitive_overload:
      description: "Detect cognitive system overload"
      indicators:
        - working_memory_saturation
        - processing_error_rate_increase
        - response_quality_degradation

  mitigation_strategies:
    adaptive_filtering:
      description: "Dynamically adjust filtering thresholds"
      adjustments:
        - increase_relevance_threshold
        - prioritize_family_emergency_only
        - defer_non_critical_processing

    resource_reallocation:
      description: "Reallocate cognitive resources"
      strategies:
        - pause_background_processing
        - increase_processing_parallelism
        - activate_emergency_capacity_reserves

    graceful_degradation:
      description: "Maintain core family functions under load"
      priority_preservation:
        - family_safety_monitoring
        - emergency_communication
        - critical_family_coordination

# === PERFORMANCE METRICS ===

attention_gate_metrics:
  decision_accuracy:
    measurement: "percentage_of_correct_gate_decisions"
    target: "> 90%"
    validation_method: "family_member_feedback_analysis"

  family_relevance_precision:
    measurement: "true_positive_rate_for_family_relevant_stimuli"
    target: "> 85%"
    validation_method: "family_context_verification"

  response_latency:
    measurement: "time_from_stimulus_to_gate_decision"
    target: "< 50ms for simple decisions, < 200ms for complex"
    validation_method: "system_performance_monitoring"

  cognitive_load_management:
    measurement: "effective_cognitive_resource_utilization"
    target: "70-85% utilization for optimal performance"
    validation_method: "capacity_monitoring_analysis"

# === ERROR HANDLING ===

error_scenarios:
  false_positive_family_relevance:
    description: "Incorrectly identifying non-family content as highly relevant"
    detection:
      - family_member_feedback_negative
      - context_verification_failure
      - downstream_processing_rejection
    mitigation:
      - relevance_scoring_recalibration
      - context_verification_enhancement
      - feedback_loop_integration

  false_negative_emergency_signals:
    description: "Missing critical family emergency or safety signals"
    detection:
      - emergency_escalation_without_gate_response
      - safety_system_override_activation
      - family_member_emergency_feedback
    mitigation:
      - emergency_detection_sensitivity_increase
      - safety_signal_pattern_enhancement
      - emergency_pathway_redundancy

  cognitive_resource_starvation:
    description: "Inadequate cognitive resources for family processing"
    detection:
      - sustained_high_latency
      - processing_queue_overflow
      - family_member_response_quality_degradation
    mitigation:
      - resource_allocation_rebalancing
      - background_process_throttling
      - emergency_capacity_activation

# === INTEGRATION POINTS ===

upstream_integration:
  sensory_input_sources:
    - family_conversation_streams
    - device_interaction_events
    - environmental_sensor_data
    - family_calendar_notifications

  context_input_sources:
    - family_relationship_database
    - family_emotional_state_tracker
    - family_routine_patterns
    - family_safety_monitoring_system

downstream_integration:
  cognitive_processing_pipelines:
    - working_memory_allocation
    - hippocampal_encoding_pipeline
    - family_coordination_pipeline
    - emergency_response_pipeline

  feedback_loops:
    - family_member_satisfaction_feedback
    - processing_outcome_evaluation
    - cognitive_load_impact_assessment
    - family_dynamic_improvement_tracking

# === COMPLIANCE & SAFETY ===

safety_requirements:
  child_protection:
    - mandatory_age_appropriate_filtering
    - parental_override_capabilities
    - inappropriate_content_blocking
    - child_safety_signal_prioritization

  family_privacy:
    - relationship_context_encryption
    - family_member_consent_verification
    - private_conversation_protection
    - family_data_anonymization

  emergency_protocols:
    - emergency_signal_guaranteed_processing
    - safety_override_mechanisms
    - crisis_escalation_pathways
    - emergency_contact_activation

# === TESTING & VALIDATION ===

test_scenarios:
  functional_tests:
    - family_emergency_signal_detection
    - age_appropriate_content_filtering
    - family_relevance_scoring_accuracy
    - cognitive_load_management_effectiveness

  performance_tests:
    - gate_decision_latency_under_load
    - concurrent_family_member_processing
    - backpressure_management_effectiveness
    - resource_allocation_optimization

  safety_tests:
    - emergency_signal_never_dropped
    - inappropriate_content_blocked_reliably
    - child_protection_mechanism_validation
    - family_privacy_preservation_verification

  securitySchemes:
    FamilyAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: Family-scoped JWT authentication with cognitive permissions

    CognitiveAPIKey:
      type: apiKey
      in: header
      name: X-Cognitive-API-Key
      description: Cognitive subsystem API key for thalamic operations
